<h6>Verison 1.1.0-16</h6>

2023 A better site is <a href="https://coincap.io">coincap.io</a> <br>



<!--<input id="showTicker" type="button" value="Recent prices" onclick="getRecentPrices()">  -->

<script>

// globals
  let myUsdToCad = 0;


  
  async function getRecentPrices() {
    try {
      const url = 'https://api.coincap.io/v2/assets/bitcoin';
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      const data = await response.json();
    //  console.log('response.data.rateUsd');
    //  console.log(response.data.rateUsd);
      return data
    } catch (error) {
      console.error('An error occurred:', error);
    }
  }


  async function getCanadianPrices() {
    try {
      const url = 'https://api.coincap.io/v2/rates/canadian-dollar';
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      const data = await response.json();
      myUsdToCad = data.data.rateUsd
      console.log('data.data.rateUsd');
      console.log(data.data.rateUsd);
      return data
    } catch (error) {
      console.error('An error occurred:', error);
    }
  }





  
</script>








<h2 align=center> Personal Cryptocurrency Ticker</h2>


A possibly better site is <a href="https://coincap.io">coincap.io</a><br><br>



Eventually this should default to $100 Canadian into each cyrptocurrency for Nov 5th 2017<br>




<script>
function checkAll(myOne){
document.getElementById('myCheck').click()

}
</script>


<body onload="{
let myCad = getCanadianPrices()

myLocalA0 = localStorage.getItem('myStoreA0')
if(myLocalA0 != null){
document.getElementById('myA0').value = myLocalA0
}
myLocalA1 = localStorage.getItem('myStoreA1')
if(myLocalA1 != null){
document.getElementById('myA1').value = myLocalA1
document.getElementById('myA6').value = myLocalA1 // just for Ask amount
}
myLocalA2 = localStorage.getItem('myStoreA2')
if(myLocalA2 != null){
document.getElementById('myA2').value = myLocalA2
}









// grab ticker info
 document.getElementById('showTicker').click()
}">








<input id="showTicker" type=button value="Recent prices" onclick="{

myGrab = async function(){                                                             
  let myNewData = await getRecentPrices()
  console.log('myNewData.data.priceUsd')
  console.log(myNewData.data.priceUsd)
  myJsonData = JSON.stringify( myNewData, null, null)
  let myUseable = JSON.parse(myJsonData)
  // really useful to show the data received
  //document.getElementById('myDiv04').innerHTML = JSON.stringify( myNewData, null, '<br>')   // show all data

  let myCoinCost = (parseFloat(myUseable.data.priceUsd) / parseFloat(myUsdToCad)).toFixed(0)
  document.getElementById('myA5').value = myCoinCost
  let my24h =  parseFloat(myUseable.data.volumeUsd24Hr)       // out[0]['total_volume']
  let myVwap24Hr =  parseFloat(myUseable.data.vwap24Hr).toFixed(0)    
  let myChange24h =  parseFloat(myUseable.data.changePercent24Hr)
//  let myChange24h =  -4
      // document.getElementById('myA8').style.backgroundColor = 'lime'

if (my24h > 0){
myShowVol = (parseFloat(my24h) * 100 / parseFloat(document.getElementById('myA0').value)).toFixed(2)
myVolOut = ''

  if (my24h > parseFloat(document.getElementById('myA0').value)) {

     myVolOut = myShowVol+ '%  [' + myChange24h + '] ' + myVwap24Hr
     if (myChange24h > 0.3) {   // 1.0
       document.getElementById('myA8').style.backgroundColor = 'lime'
       myVolOut = 'Bull Run ?? ' + myShowVol+ '%  [' + myChange24h + '] ' + myVwap24Hr
     } 
     if (myChange24h < -0.3){    // -1.0
        document.getElementById('myA8').style.backgroundColor = 'DeepPink'
        myVolOut = 'Crash ?? ' + myShowVol+ '%  [' + myChange24h + '] ' + myVwap24Hr 
     }
   } else { myVolOut = myShowVol+ '%  [' + myChange24h + '] ' + myVwap24Hr   }
} else {myVolOut = 'No data'}

document.getElementById('myA8').value = myVolOut

  

 // document.getElementById('myA8').value = my24h
  document.getElementById('myA7').value = (parseFloat(myCoinCost)  * parseFloat(document.getElementById('myA6').value)).toFixed(2)
  console.log('myNewData')
  console.log(myNewData)
 // console.log('myJsonData')
//  console.log(myJsonData)
//  console.log('myUseable')
 // console.log(myUseable)
} 



myGrab()



//https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bitcoin
//https://api.coindesk.com/v1/

//let urlA2 = 'https://api.coinmarketcap.com/v1/ticker/bitcoin/?convert=cad';
//let urlA2 = 'https://api.coincap.io/v2/assets/bitcoin';


//fetch(urlA2, { mode: 'no-cors'})
//.then(res => res.json())
//.then((out) => {

//console.log(out)
  
//let myCoinCost = parseFloat(out[0]['current_price']).toFixed(0)  // 0 for bitcoin
//let my24h = out[0]['total_volume']

  

                                                                  
/*
let myChange1h = out[0]['percent_change_1h']
let myChange24h = out[0]['price_change_percentage_24h']
let myChange7d = out[0]['percent_change_7d']

if (my24h > 0){
myShowVol = (parseFloat(my24h) * 100 / parseFloat(document.getElementById('myA0').value)).toFixed(2)
myVolOut = ''

  if (my24h > parseFloat(document.getElementById('myA0').value)) {
     myVolOut = myShowVol+ '%  [' + myChange7d +' : '+ myChange24h +' : '+ myChange1h +']' 
     if (myChange24h > 1.0) { 
       document.getElementById('myA8').style.backgroundColor = 'lime'
       myVolOut = 'Bull Run ?? ' + myShowVol+ '%  [' + myChange7d +' : '+ myChange24h +' : '+ myChange1h +']' 
     } 
     if (myChange24h < -1.0){ 
        document.getElementById('myA8').style.backgroundColor = 'DeepPink'
        myVolOut = 'Crash ?? ' + myShowVol+ '%  [' + myChange7d +' : '+ myChange24h +' : '+ myChange1h +']'  
     }
   } else { myVolOut = myShowVol+ '%  [' + myChange7d +' : '+ myChange24h +' : '+ myChange1h +']'   }
} else {myVolOut = 'No data'}

document.getElementById('myA8').value = myVolOut
                                                                  
                                                                  */

//document.getElementById('myA5').value = myCoinCost
//document.getElementById('myA7').value = (parseFloat(myCoinCost)  * parseFloat(document.getElementById('myA6').value)  ).toFixed(2)
//document.getElementById('myCheck').click()   //do the math again until correct


//document.getElementById('myDiv04').innerHTML =  myNewData

  //    document.getElementById('myDiv04').innerHTML = JSON.stringify( myNewData, null, null)

//})
//.catch(err => { throw err });







}">






<table border=1 width="100%">
<tr><td>Symbol</td><td>Concern Vol</td><td>Original #</td><td>Original Price $ </td><td>Ori. Cost $ CDN</td><td>Profit/Loss CDN</td><td>Present Price $ CDN</td><td>Ask #</td><td>Value $ CDN</td><td>Vol/Scary%  &#9651;[24H% ] vwap24Hr</td><td>Cyrpto</td></tr>



<tr><td>
BTC</td><td>
<input id="myA0" type=text size = 9 value="30000000000" onChange="checkAll('myA0')" style="background-color:lightgrey;"></td><td>
<input id="myA1" type=text size = 7  value="0.01074" onChange="checkAll('myA1')" style="background-color:yellow;"></td><td>
<input id="myA2" type=text size = 7  value="9308.98" onChange="checkAll('myA2')" style="background-color:yellow;"></td><td>
<input READONLY id="myA3" type=text size = 7  value="-99" onChange="checkAll('myA3')"></td><td>
<div id="myA4"></div></td><td>
<input id="myA5" type=text size = 7  value="9308.98" onChange="checkAll('myA5')"></td><td>
<input id="myA6" type=text size = 7  value="0.01074" onChange="checkAll('myA6')"></td><td>
<input id="myA7" type=text size = 7  value="-99" onChange="checkAll('myA7')"></td><td>
<input READONLY  id="myA8" type=text size = 35  value="n/a" onChange="checkAll('myA8')"></td><td>
<a href="https://coinmarketcap.com/currencies/bitcoin/">Bitcoin</a></td></tr>





















<tr><td>
</td><td>
</td><td>
</td><td>
</td><td>
<input READONLY id="myGSum" type=text size = 7  value="-99" style="background-color:yellow"> Orig.</td><td>
<input READONLY id="myGProfit" type=text size = 7  value="-99" style="background-color:yellow"> Profit</td><td>
<input READONLY id="myGTotal" type=text size = 7  value="-99" style="background-color:yellow"> Total</td><td>
</td><td>
</td><td>
</td><td>
</td></tr>










</table><br>


<div id="myDiv04">...</div>


<input id="myCheck" type=button value="CheckAll" onClick="{




myOriginalCostA = (parseFloat(document.getElementById('myA1').value) * parseFloat(document.getElementById('myA2').value)).toFixed(2)
myFinalCostA = (parseFloat(document.getElementById('myA1').value) * parseFloat(document.getElementById('myA5').value)).toFixed(2)
myAskCostA = (parseFloat(document.getElementById('myA5').value) * parseFloat(document.getElementById('myA6').value)).toFixed(2)

myProfitA = (myFinalCostA - myOriginalCostA).toFixed(2)

// check for profit(green) or loss(red)
myOutProfitA = '<font color=green> $'+ myProfitA + ' </font> '
if (myProfitA < 0){
   myOutProfitA = '<font color=red> $'+ myProfitA + ' </font> '
}

document.getElementById('myA3').value = myOriginalCostA
document.getElementById('myA4').innerHTML = myOutProfitA
document.getElementById('myA7').value = myAskCostA







//Total columns
document.getElementById('myGSum').value = parseFloat(document.getElementById('myA3').value) 

document.getElementById('myGProfit').value = parseFloat(myProfitA) 

document.getElementById('myGTotal').value = (  parseFloat(document.getElementById('myGSum').value) + parseFloat(document.getElementById('myGProfit').value)  ).toFixed(2)



}">   


  
<input type="button" value="ToDepressed?" onClick="{
   alert('Reset your prices to the present market value\nFun to not save the amount but to leave this browser open and check hourly (click recent prices) to see how the market has changed\nMust click Store Original Amounts! if you want to keep these values')
   document.getElementById('myA2').value =  document.getElementById('myA5').value


   document.getElementById('showTicker').click()    // to reset prices


}"><br><br>







<input type="button" value="Store Original Amounts!" onClick="{
alert('This permanently changes the first three columns\nIf you want to reset then load the page using your browser incognito mode to see the originals again')

localStorage.setItem('myStoreA0', document.all.myA0.value)
localStorage.setItem('myStoreA1', document.all.myA1.value)
localStorage.setItem('myStoreA2', document.all.myA2.value)





}"><br>






Another possible source for data at <a href="https://apiv2.bitcoinaverage.com/">https://apiv2.bitcoinaverage.com/</a><br>

Historical data week of Nov 5 2017 try (set to Canadian dollars) <a href="https://coinmarketcap.com/historical/20171105/">https://coinmarketcap.com/historical/20171105/</a>














<h3 align=center>Purchased more coins at a different price</h3>


(Note: If you know the # coins and the total cost you can enter the total cost and it will caculate the coin price. 
Not as accurate since it may not account for the transaction costs)<br><br>

Select a Cryptocurrency if you have purchased more coins<br>
<select id="myTypeOfCoin" size=1 onchange="{
   if (this.value == 'BTC'){  
      document.getElementById('myOldCoins').value = document.getElementById('myA1').value
      document.getElementById('myOldPrice').value = document.getElementById('myA2').value
  }




}">
  <option value=" ">
  <option value="BTC">Bitcoin
  <option value="ETH">Ethereum
  <option value="LTC">Litecoin
  <option value="XLM">Stella
  <option value="IOT">MIOTA
  <option value="XRP">Ripple
  <option value="WTC">Walton
</select><br>

Copy your information from the above chart into the first two boxes<br>



Old Coin #<input type=text value="" id="myOldCoins" onclick="{

}">



OldCoin Price $<input type=text value="" id="myOldPrice" onclick="{

}">


Old Sub Total $<input type=text  id="myOldTotal" onChange="{
  document.getElementById('myOldPrice').value = (parseFloat(document.getElementById('myOldTotal').value) / parseFloat(document.getElementById('myOldCoins').value)).toFixed(5)



}"> <br><br>





Copy your new bitcoin purchase into thes boxes<br>


New Coin #<input type=text value=""  id="myNewCoins" onclick="{

}">



New Coin Price $<input type=text value=""  id="myNewPrice" onclick="{

}">


New Sub Total $<input type=text  id="myNewTotal" onchange="{
 document.getElementById('myNewPrice').value = (parseFloat(document.getElementById('myNewTotal').value) / parseFloat(document.getElementById('myNewCoins').value)).toFixed(5)

}"> <br><br>








Copy the first two boxes back into the chart<br>


<input type=button value="Add Coins" onclick="{

   document.getElementById('myOldTotal').value = parseFloat(document.getElementById('myOldCoins').value) * parseFloat(document.getElementById('myOldPrice').value)
   document.getElementById('myNewTotal').value = parseFloat(document.getElementById('myNewCoins').value) * parseFloat(document.getElementById('myNewPrice').value)



 
// match .toFixed(5)    the decimals to the alt coin
 

  document.getElementById('myTotalCoins').value = (parseFloat(document.getElementById('myOldCoins').value) + parseFloat(document.getElementById('myNewCoins').value)).toFixed(5)
  document.getElementById('myTotalTotal').value = (parseFloat(document.getElementById('myOldTotal').value) + parseFloat(document.getElementById('myNewTotal').value)).toFixed(5)
  document.getElementById('myTotalPrice').value = (parseFloat(document.getElementById('myTotalTotal').value) / parseFloat(document.getElementById('myTotalCoins').value)).toFixed(5)

}">

<input type=button value="Clear All" onclick="{
 document.getElementById('myOldCoins').value = ''
  document.getElementById('myOldTotal').value = ''
  document.getElementById('myOldPrice').value = ''

 document.getElementById('myNewCoins').value = ''
  document.getElementById('myNewTotal').value = ''
  document.getElementById('myNewPrice').value = ''

 document.getElementById('myTotalCoins').value = ''
  document.getElementById('myTotalTotal').value = ''
  document.getElementById('myTotalPrice').value = ''

}">


<br><br>



Final Coin #<input type=text  id="myTotalCoins" onclick="{

}">



Final Price $<input type=text  id="myTotalPrice" onclick="{

}">


Final Total $<input type=text  id="myTotalTotal" onclick="{
   alert()
}"> <br><br>

<input type=button value="Return calculated values back to the chart" onclick="{

  if (document.getElementById('myTypeOfCoin').value == 'BTC'){
      document.getElementById('myA1').value = document.getElementById('myTotalCoins').value
      document.getElementById('myA2').value = document.getElementById('myTotalPrice').value
  }






}">





